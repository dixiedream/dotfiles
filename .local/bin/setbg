#!/bin/sh

# This script does the following:
#	If given a file, set that as the new wallpaper.
#	If given a directory, choose random file in it.

currentSession=$XDG_SESSION_TYPE
bgloc="${XDG_CACHE_HOME:-$HOME/.cache}/bg"

[ -f "$1" ] && ln -sf "$(readlink -f "$1")" "$bgloc"
[ -d "$1" ] && ln -sf "$(find "$(readlink -f "$1")" -iregex '.*.\(jpg\|jpeg\|png\|gif\)' -type f | shuf -n 1)" "$bgloc"
[ "$currentSession" = "wayland" ] && swaybg -i $bgloc -m fill &
exit 0
