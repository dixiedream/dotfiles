#!/bin/sh
output=$XDG_CACHE_HOME/archbackup.txt

printf "Archbackup - $(date)\n\n" > $output
if [ -x "$(command -v "pacman")" ]; then
    echo "=== PACMAN ===================" >> $output
    pacman -Qqen >> $output
    printf "\n=== AUR ======================\n" >> $output
    pacman -Qqem >> $output
else
    echo "=== APT ======================" >> $output
    apt list --installed | cut -d'/' -f1 >> $output

    if [ -x "$(command -v "dconf")" ]; then
      printf "\n=== DCONF ====================\n" >> $output
      dconf dump / >> $output
    fi
fi

$EDITOR $output
